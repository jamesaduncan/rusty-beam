<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Configuration file for Rusty Beam Website">
    <script type="module" src="https://jamesaduncan.github.io/dom-aware-primitives/index.mjs"></script>
    <title>Rusty Beam Website Configuration</title>
</head>
<body>
    <h1>Rusty Beam Website Configuration</h1>

    <div style="background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; margin: 20px 0; border-radius: 5px;">
        <strong>‚ö†Ô∏è Google OAuth2 Setup Required:</strong>
        <ol>
            <li>Create a project at <a href="https://console.cloud.google.com/">Google Cloud Console</a></li>
            <li>Enable the Google+ API</li>
            <li>Create OAuth2 credentials (Web application type)</li>
            <li>Add <code>http://localhost:3000/auth/google/callback</code> to Authorized redirect URIs</li>
            <li>Set environment variables <code>GOOGLE_CLIENT_ID</code> and <code>GOOGLE_CLIENT_SECRET</code></li>
        </ol>
        <p>For testing without OAuth2, comment out the Google OAuth2 Plugin section.</p>
    </div>

    <table itemref="host-localhost" itemscope itemtype="http://rustybeam.net/ServerConfig">
        <caption>Rusty Beam Website Configuration</caption>
        <thead>
            <tr>
                <th>Property Name</th>
                <th>Property Value</th>
                <th>Property Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Server Root</td>
                <td itemprop="serverRoot" contenteditable="plaintext-only">./docs</td>
                <td><p>The root directory of the server where static files are served from.</p></td>
            </tr>
            <tr>
                <td>Address</td>
                <td itemprop="bindAddress" contenteditable="plaintext-only">127.0.0.1</td>
                <td><p>The IP address the server will bind to.</p></td>
            </tr>
            <tr>
                <td>Port</td>
                <td itemprop="bindPort" contenteditable="plaintext-only">3000</td>
                <td><p>The port the server will listen on.</p></td>
            </tr>
        </tbody>
    </table>

    <table id="host-localhost" itemscope itemtype="http://rustybeam.net/HostConfig">
        <caption>Host Configuration: localhost</caption>
        <thead>
            <tr>
                <th>Host</th>
                <th>Property Name</th>
                <th>Property Value</th>
                <th>Property Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td rowspan="12">localhost</td>
                <td>Plugin</td>
                <td itemprop="plugin">file://./plugins/librusty_beam_google_oauth2.so</td>
                <td><p>Google OAuth2 authentication plugin for user login</p></td>
            </tr>
        </tbody>
    </table>

    <table itemscope itemtype="http://rustybeam.net/PluginConfig">
        <caption>Google OAuth2 Plugin Configuration</caption>
        <thead>
            <tr>
                <th>Property Name</th>
                <th>Property Value</th>
                <th>Property Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Redirect URI</td>
                <td itemprop="redirect_uri" contenteditable="plaintext-only">http://localhost:3000/auth/google/callback</td>
                <td><p>Callback URL for OAuth2 authentication</p></td>
            </tr>
        </tbody>
    </table>
    
    <div style="background: #e3f2fd; border: 1px solid #bbdefb; padding: 15px; margin: 20px 0; border-radius: 5px;">
        <h3>üîê Environment Variables Required</h3>
        <p>Google OAuth2 credentials are read from environment variables for security:</p>
        <ul>
            <li><code>GOOGLE_CLIENT_ID</code> - Your Google OAuth2 client ID</li>
            <li><code>GOOGLE_CLIENT_SECRET</code> - Your Google OAuth2 client secret</li>
        </ul>
        <p>Copy <code>.env.example</code> to <code>.env</code> and set these values for local development.</p>
    </div>

    <table itemscope itemtype="http://rustybeam.net/PluginConfig">
        <caption>Core Plugins Configuration</caption>
        <thead>
            <tr>
                <th>Plugin</th>
                <th>Property Name</th>
                <th>Property Value</th>
                <th>Property Description</th>
            </tr>
        </thead>
        <tbody>
            <!-- Basic Authentication Plugin -->
            <tr>
                <td rowspan="2">Basic Auth</td>
                <td>Plugin</td>
                <td itemprop="plugin">file://./plugins/librusty_beam_basic_auth.so</td>
                <td><p>Basic HTTP authentication plugin</p></td>
            </tr>
            <tr>
                <td>Auth File</td>
                <td itemprop="authfile" contenteditable="plaintext-only">./docs/auth/basic-auth.html</td>
                <td><p>Path to basic authentication credentials file</p></td>
            </tr>

            <!-- Authorization Plugin -->
            <tr>
                <td rowspan="2">Authorization</td>
                <td>Plugin</td>
                <td itemprop="plugin">file://./plugins/librusty_beam_authorization.so</td>
                <td><p>Role-based access control plugin</p></td>
            </tr>
            <tr>
                <td>Auth File</td>
                <td itemprop="authfile" contenteditable="plaintext-only">./docs/auth/authorization.html</td>
                <td><p>Path to authorization rules file</p></td>
            </tr>

            <!-- Redirect Plugin -->
            <tr>
                <td rowspan="2">Redirect</td>
                <td>Plugin</td>
                <td itemprop="plugin">file://./plugins/librusty_beam_redirect.so</td>
                <td><p>URL redirection plugin with pattern matching</p></td>
            </tr>
            <tr>
                <td>Rules File</td>
                <td itemprop="rulesfile" contenteditable="plaintext-only">./config/redirect-rules.html</td>
                <td><p>Path to redirect rules configuration file</p></td>
            </tr>

            <!-- Selector Handler Plugin -->
            <tr>
                <td rowspan="1">Selector Handler</td>
                <td>Plugin</td>
                <td itemprop="plugin">file://./plugins/librusty_beam_selector_handler.so</td>
                <td><p>CSS selector-based HTML manipulation plugin</p></td>
            </tr>

            <!-- File Handler Plugin -->
            <tr>
                <td rowspan="1">File Handler</td>
                <td>Plugin</td>
                <td itemprop="plugin">file://./plugins/librusty_beam_file_handler.so</td>
                <td><p>Static file serving plugin</p></td>
            </tr>

            <!-- Access Log Plugin -->
            <tr>
                <td rowspan="2">Access Log</td>
                <td>Plugin</td>
                <td itemprop="plugin">file://./plugins/librusty_beam_access_log.so</td>
                <td><p>HTTP request logging plugin</p></td>
            </tr>
            <tr>
                <td>Log File</td>
                <td itemprop="logfile" contenteditable="plaintext-only">./access.log</td>
                <td><p>Path to access log file</p></td>
            </tr>

            <!-- CORS Plugin -->
            <tr>
                <td rowspan="1">CORS</td>
                <td>Plugin</td>
                <td itemprop="plugin">file://./plugins/librusty_beam_cors.so</td>
                <td><p>Cross-Origin Resource Sharing support plugin</p></td>
            </tr>

            <!-- Security Headers Plugin -->
            <tr>
                <td rowspan="1">Security Headers</td>
                <td>Plugin</td>
                <td itemprop="plugin">file://./plugins/librusty_beam_security_headers.so</td>
                <td><p>Security headers (CSP, HSTS, etc.) plugin</p></td>
            </tr>

            <!-- Rate Limit Plugin -->
            <tr>
                <td rowspan="3">Rate Limit</td>
                <td>Plugin</td>
                <td itemprop="plugin">file://./plugins/librusty_beam_rate_limit.so</td>
                <td><p>Token bucket rate limiting plugin</p></td>
            </tr>
            <tr>
                <td>Requests Per Second</td>
                <td itemprop="requests_per_second" contenteditable="plaintext-only">10</td>
                <td><p>Maximum requests per second allowed</p></td>
            </tr>
            <tr>
                <td>Burst Capacity</td>
                <td itemprop="burst_capacity" contenteditable="plaintext-only">20</td>
                <td><p>Maximum burst requests allowed</p></td>
            </tr>

            <!-- Health Check Plugin -->
            <tr>
                <td rowspan="1">Health Check</td>
                <td>Plugin</td>
                <td itemprop="plugin">file://./plugins/librusty_beam_health_check.so</td>
                <td><p>Health monitoring endpoints plugin</p></td>
            </tr>
        </tbody>
    </table>

    <div style="background: #e3f2fd; border: 1px solid #bbdefb; padding: 15px; margin: 20px 0; border-radius: 5px;">
        <h3>üìÅ Directory Structure</h3>
        <p>The server serves content from <code>./docs/</code> with the following structure:</p>
        <ul>
            <li><code>/</code> - Main Rusty Beam homepage</li>
            <li><code>/auth/</code> - Authentication and user management</li>
            <li><code>/config/</code> - Server configuration interface</li>
            <li><code>/schema/</code> - Microdata schema definitions</li>
            <li><code>/docs/</code> - Documentation and guides</li>
            <li><code>/demos/guestbook/</code> - Interactive guestbook demo</li>
            <li><code>/assets/</code> - CSS, JavaScript, and other static assets</li>
        </ul>
    </div>

    <div style="background: #f3e5f5; border: 1px solid #ce93d8; padding: 15px; margin: 20px 0; border-radius: 5px;">
        <h3>üöÄ Usage Instructions</h3>
        <ol>
            <li><strong>Setup Environment:</strong> Copy <code>.env.example</code> to <code>.env</code> and set your Google OAuth2 credentials</li>
            <li><strong>Start Server:</strong> <code>cargo run -- config/rustybeam-site.html</code></li>
            <li><strong>Access Site:</strong> Open <a href="http://localhost:3000">http://localhost:3000</a></li>
            <li><strong>Admin Access:</strong> Login with Google, then access <a href="http://localhost:3000/auth/">/auth/</a> or <a href="http://localhost:3000/config/">/config/</a></li>
        </ol>
    </div>
</body>
</html>