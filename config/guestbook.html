<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Configuration file for Rusty Beam Guestbook Demo">
    <script type="module" src="https://jamesaduncan.github.io/dom-aware-primitives/index.mjs"></script>
    <title>Rusty Beam Website Configuration (Legacy)</title>
</head>
<body>
    <h1>Rusty Beam Website Configuration (Legacy)</h1>

    <div style="background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; margin: 20px 0; border-radius: 5px;">
        <strong>⚠️ Google OAuth2 Setup Required:</strong>
        <ol>
            <li>Create a project at <a href="https://console.cloud.google.com/">Google Cloud Console</a></li>
            <li>Enable the Google+ API</li>
            <li>Create OAuth2 credentials (Web application type)</li>
            <li>Add <code>http://localhost:3000/auth/google/callback</code> to Authorized redirect URIs</li>
            <li>Set environment variables <code>GOOGLE_CLIENT_ID</code> and <code>GOOGLE_CLIENT_SECRET</code></li>
        </ol>
        <p>For testing without OAuth2, comment out the Google OAuth2 Plugin section.</p>
    </div>

    <table itemref="host-localhost" itemscope itemtype="http://rustybeam.net/ServerConfig">
        <caption>Rusty Beam Website Configuration (Legacy)</caption>
        <thead>
            <tr>
                <th>Property Name</th>
                <th>Property Value</th>
                <th>Property Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Server Root</td>
                <td itemprop="serverRoot" contenteditable="plaintext-only">./docs</td>
                <td><p>The root directory of the server where static files are served from.</p></td>
            </tr>
            <tr>
                <td>Address</td>
                <td itemprop="bindAddress" contenteditable="plaintext-only">127.0.0.1</td>
                <td><p>The IP address the server will bind to.</p></td>
            </tr>
            <tr>
                <td>Port</td>
                <td itemprop="bindPort" contenteditable="plaintext-only">3000</td>
                <td><p>The port the server will listen on.</p></td>
            </tr>
        </tbody>
    </table>

    <table id="host-localhost" itemprop="host" itemscope itemtype="http://rustybeam.net/HostConfig">
        <thead>
            <tr>
                <th>Plugin Name</th>
                <th>Plugin Path</th>
                <th>Plugin Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Host Name</td>
                <td itemprop="hostName" contenteditable="plaintext-only">localhost</td>
                <td><p>The name of the host server.</p></td>            
            </tr>
            <tr>
                <td>Host Root</td>
                <td itemprop="hostRoot" contenteditable="plaintext-only">./examples/guestbook</td>
                <td><p>The root directory for the host-headed server</p></td>
            </tr>
            <tr>
                <td>Google OAuth2 Plugin</td>
                <td itemprop="plugin" itemscope itemtype="http://rustybeam.net/Plugin">
                    <span itemprop="library">file://./plugins/librusty_beam_google_oauth2.so</span>
                    <span itemprop="client_id">YOUR_GOOGLE_CLIENT_ID</span>
                    <span itemprop="client_secret">YOUR_GOOGLE_CLIENT_SECRET</span>
                    <span itemprop="redirect_uri">http://localhost:3000/auth/google/callback</span>
                </td>
                <td><p>Provides Google OAuth2 authentication (set authenticated_user metadata)</p></td>
            </tr>
            <tr>
                <td>Authorization Plugin</td>
                <td itemprop="plugin" itemscope itemtype="http://rustybeam.net/Plugin">
                    <span itemprop="library">file://./plugins/librusty_beam_authorization.so</span>
                    <span itemprop="authfile">file://./examples/guestbook/auth/index.html</span>
                </td>
                <td><p>Enforces access control rules (handles both anonymous and authenticated users)</p></td>
            </tr>
            <tr>
                <td>Redirect Plugin</td>
                <td itemprop="plugin" itemscope itemtype="http://rustybeam.net/Plugin">
                    <span itemprop="library">file://./plugins/librusty_beam_redirect.so</span>
                    <span itemprop="config_file">config/guestbook.html</span>
                </td>
                <td><p>Redirects unauthenticated users from /auth/* to home page</p></td>
            </tr>
            <tr>
                <td>WebSocket Plugin</td>
                <td itemprop="plugin" itemscope itemtype="http://rustybeam.net/Plugin">
                    <span itemprop="library">file://./plugins/librusty_beam_websocket.so</span>
                </td>
                <td><p>Handles WebSocket connections for real-time updates</p></td>
            </tr>
            <tr>
                <td>Selector Handler Plugin</td>
                <td itemprop="plugin" itemscope itemtype="http://rustybeam.net/Plugin">
                    <span itemprop="library">file://./plugins/librusty_beam_selector_handler.so</span>
                </td>
                <td><p>Processes CSS selector-based requests</p></td>
            </tr>
            <tr>
                <td>File Handler Plugin</td>
                <td itemprop="plugin" itemscope itemtype="http://rustybeam.net/Plugin">
                    <span itemprop="library">file://./plugins/librusty_beam_file_handler.so</span>
                </td>
                <td><p>Serves static files</p></td>
            </tr>
            <tr>
                <td>Error Handler Plugin</td>
                <td itemprop="plugin" itemscope itemtype="http://rustybeam.net/Plugin">
                    <span itemprop="library">file://./plugins/librusty_beam_error_handler.so</span>
                </td>
                <td><p>Provides custom error pages</p></td>
            </tr>
            <tr>
                <td>Access Log Plugin</td>
                <td itemprop="plugin" itemscope itemtype="http://rustybeam.net/Plugin">
                    <span itemprop="library">file://./plugins/librusty_beam_access_log.so</span>
                </td>
                <td><p>Logs HTTP requests</p></td>
            </tr>
        </tbody>
    </table>
    
    <!-- Auth redirect: Send unauthenticated users from /auth/* to home -->
    <div itemscope itemtype="http://rustybeam.net/RedirectRule">
        <span itemprop="from">^/auth/.*$</span>
        <span itemprop="to">/</span>
        <span itemprop="status">302</span>
        <span itemprop="on">403</span>
    </div>
</body>
</html>